syntax = "proto3";

enum ParameterType {
    STRING = 0;
    NUMBER = 1;
    BOOLEAN = 2;
    OBJECT = 3;
    ARRAY = 4;
    STRING_ARRAY = 5;
    NUMBER_ARRAY = 6;
    BOOLEAN_ARRAY = 7;
    OBJECT_ARRAY = 8;
    ANY = 9;
}

enum DeviceHealthState {
    ONLINE = 0;
    OFFLINE = 1;
    ERROR = 2;
    UNKNOWN = 3;
}

message SensorSchema {
    string name = 1;
    string description = 2;
    ParameterType type = 3;
}

message ParameterDefinition {
    string name = 1;
    repeated ParameterType types = 2;
    bool optional = 3;
    string description = 4;
}

message CommandDefinition {
    string name = 1;
    repeated ParameterDefinition parameters = 2;
    string short_description = 3;
    string long_description = 4;
}

message SensorValue {
    string device_name = 1;
    
    string sensor_name = 2;
    
    ParameterType type = 3;
    
    string value = 4; // JSON encoded
}

message DeviceDefinition {
    string name = 1;
    string device_type = 2;
    string description = 3;
    repeated SensorSchema sensors = 4;
    repeated CommandDefinition commands = 5;
}

message InitiateDeviceDiscovery {
    string origin = 1;
}

message DeviceDiscoveryAnnouncement {
    DeviceDefinition device = 1;
    repeated SensorValue sensor_values = 2;
}
